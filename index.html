<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1a73e8">

<style>
body{font-family:Arial;background:#f2f2f2;margin:0}
.box{max-width:700px;margin:auto;background:#fff;padding:15px}
button{padding:12px;width:100%;margin-top:8px;border:none;border-radius:8px;font-weight:bold}
.blue{background:#1a73e8;color:#fff}
.green{background:#188038;color:#fff}
.red{background:#d93025;color:#fff}
.hidden{display:none}
input,select{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid #ccc}
table{width:100%;border-collapse:collapse;margin-top:10px}
td,th{border:1px solid #ccc;padding:6px;text-align:center}
</style>
</head>

<body>

<div class="box">

<h3>LOGIN</h3>
<select id="user"></select>
<input id="pin" type="password" placeholder="PIN">
<button class="blue" onclick="login()">LOGIN</button>

<div id="menu" class="hidden">
<button onclick="show('cust')">ADD CUSTOMER</button>
<button onclick="show('sale')">SALES ORDER</button>
</div>

<div id="cust" class="hidden">
<h3>ADD CUSTOMER</h3>
<input id="cname" placeholder="Customer">
<input id="owner" placeholder="Owner">
<input id="contact" placeholder="Contact">
<input id="sub" placeholder="Sub locality">

<button class="red" onclick="saveCustomer()">SAVE</button>
</div>

<div id="sale" class="hidden">
<h3>SALES ORDER</h3>

<input id="customer" placeholder="Customer">
<input id="recovery" placeholder="Recovery">

<table id="sku">
<thead>
<tr><th>SKU</th><th>QTY</th></tr>
</thead>
<tbody>
<tr><td>Sample Item</td><td><input></td></tr>
</tbody>
</table>

<button class="green" onclick="saveOrder()">SAVE ORDER</button>
</div>

</div>

<script>

const API="https://script.google.com/macros/s/AKfycbzGLPzSlya9JWf8LJFuXVrTTw5TrIJbfkOa_1DsrnjXlQOWCotu2FST85CZx9IUxy0PjQ/exec";

const $=i=>document.getElementById(i);

fetch(API+"?action=getusers")
.then(r=>r.json())
.then(d=>{
user.innerHTML="";
d.forEach(x=>user.innerHTML+=`<option data-pin="${x.pin}" data-area="${x.area}">${x.name}</option>`)
});

function login(){
const o=user.selectedOptions[0];
if(pin.value!==o.dataset.pin){alert("Wrong pin");return;}
menu.classList.remove("hidden");
}

function show(id){
cust.classList.add("hidden");
sale.classList.add("hidden");
$(id).classList.remove("hidden");
}

function saveCustomer(){
alert("Customer saved (demo)");
}

function saveOrder(){
alert("Order saved (demo)");
}

</script>
</body>
</html>
